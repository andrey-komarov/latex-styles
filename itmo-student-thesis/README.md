# itmo-student-thesis.cls

Данный стилевой файл для LaTeX предлагается для использования на кафедре "Компьютерные технологии" [Университета ИТМО](http://www.ifmo.ru)
для оформления пояснительных записок к бакалаврским работам и магистерским диссертациям.

В частности, его можно использовать взамен решения с папкой sty, имеющего хождение на указанной кафедре приблизительно с 2006 года.

Преимущества:
* гораздо лучше соответствует ГОСТ Р 7.0.1-2011 (на диссертации), в том числе в части списка литературы;
* существует в виде одного cls-файла, который надо включать через `\documentclass`;
* устроен не так ужасно, как sty-папка (например, текст в нем набирается размером `\normalsize`);
* генерирует титульные страницы и даже задания с аннотациями.

Недостатки:
* использует довольно свежие возможности LaTeX (например, библиография делается связкой `biblatex`/`biber`), поэтому может не заработать на, скажем, MikTeX версии 2005 года;
* включает довольно много пакетов, что может сковывать руки тем, кто использует альтернативы;
* все еще оформлен не по правилам оформления пакетов для LaTeX --- в частности, сообщения об ошибках не оптимизировались вообще.

## Опции пакета
* `specification` --- если эта опция присутствует, будет генерироваться задание. Если задание у Вас уже готово и подписано, а копировать его содержимое
                   в LaTeX-команды лениво, опцию указывать не нужно, и тогда стилевик не будет жаловаться на отсутствие соответствующих команд.
* `annotation` --- если эта опция присутствует, будет генерироваться аннотация. Если аннотация у Вас уже готова и подписана, а копировать ее содержимое
                   в LaTeX-команды лениво, опцию указывать не нужно, и тогда стилевик не будет жаловаться на отсутствие соответствующих команд.
* `times` --- если эта опция присутствует, использует близкое подобие шрифта Times New Roman для набора текста. Для этого требуется довольно старый и кривой пакет `pscyr`, который не
              устанавливается по умолчанию в большинстве дистрибутивов.

## Команды разметки страниц, глав и разделов
* `\appendix` --- переключает нумерацию глав на "ПРИЛОЖЕНИЕ XX", где XX --- номер приложения русскими буквами.
* `\chapterconclusion` --- создает ненумерованный раздел "Выводы по главе XX", где XX --- номер текущей главы.
* `\initializefrontsections` --- ничего не делает, существует для совместимости со старым стилевым пакетом.
* `\maketitle{...}` --- создает титульную страницу (и задание с аннотацией, если указано в опциях) для бакалаврской работы (первый аргумент --- Бакалавр)
                        или магистерской диссертации (первый аргумент --- Магистр).
* `\startappendices` --- то же самое, что `\appendix`, существует для совместимости со старым стилевым пакетом.
* `\startconclusionpage` --- создает ненумерованную главу "ЗАКЛЮЧЕНИЕ".
* `\startprefacepage` --- создает ненумерованную главу "ВВЕДЕНИЕ".
* `\startthechapters` --- ничего не делает, существует для совместимости со старым стилевым пакетом.
* `\printmainbibliography` --- создает список использованных источников (с корректным заголовком и добавлением его в оглавление).
* `\printannobibliography` --- создает список публикаций без заголовка и с уменьшенным шрифтом, что используется в аннотации при указании своих публикаций.

## Команды определения общих данных
* `\author{...}{...}` --- устанавливает фамилию, имя, отчество (первый аргумент) и фамилию и.о. (второй аргумент) автора работы.
* `\publishyear{...}` --- устанавливает год выполнения работы.
* `\studygroup{...}` --- устанавливает учебную группу.
* `\supervisor{...}{...}{...}{...}` --- устанавливает фамилию, имя, отчество (первый аргумент), фамилию и.о. (второй аргумент), 
                                        степень-звание (третий аргумент) и место работы (четвертый аргумент) научного руководителя.
* `\title{...}` --- устанавливает название работы.
* `\addconsultant{...}{...}` --- добавляет консультанта: фамилию и.о. (первый аргумент), степень-звание (второй аргумент).
* `\startdate{день}{месяц}{год}` --- устанавливает дату начала работы (поля "Дата выдачи задания" и "Задание принял к исполнению"). Можно не устанавливать.
* `\finishdate{день}{месяц}{год}` --- устанавливает дату окончания работы (поле "Срок сдачи студентом законченной работы"). Можно не устанавливать.
* `\defencedate{день}{месяц}{год}` --- устанавливает дату защиты. Можно не устанавливать.

## Команды переопределения данных по умолчанию
* `\degreehost` --- переопределяет место выполнения работы.
* `\chair{...}` --- переопределяет название кафедры.
* `\chairhead{...}{...}` --- переопределяет фамилию и.о. (первый аргумент) и степень-звание (второй аргумент) заведующего кафедрой.
* `\city{...}` --- переопределяет город выполнения работы.
* `\faculty{...}` --- переопределяет название факультета.
* `\specialty{...}` --- переопределяет название специальности.
* `\specialization{...}` --- переопределяет поле "Направленность (профиль), специализация".
* `\university{...}` --- переопределяет шапку документов, соответствующую полному названию университета.

## Команды определения данных задания
* `\technicalspec{...}` --- определяет поле "Техническое задание и исходные данные к работе".
* `\plannedcontents{...}` --- определяет поле "Содержание выпускной квалификационной работы".
* `\plannedgraphics{...}` --- переопределяет поле "Перечень графического материала".
* `\plannedsources{...}` --- определяет поле "Исходные материалы и пособия".
* `\addstage{...}{...}` --- добавляет строку к календарному плану: название этапа (первый аргумент) и срок его выполнения (второй аргумент).

## Команды определения данных аннотации
* `\researchaim{...}` --- определяет поле "Цель исследования".
* `\researchtargets{...}` --- определяет поле "Задачи, решаемые в ВКР".
* `\advancedtechnologyusage{...}` --- определяет поле "Использование современных пакетов".
* `\researchsummary{...}` --- определяет поле "Краткая характеристика полученных результатов".
* `\researchfunding{...}` --- определяет поле "Гранты, полученные при выполнении работы".
* `\researchpublications{...}` --- определяет поле "Наличие публикаций и выступлений на конференциях".

## Миграция с предыдущего стилевого пакета
* скачивается свежая версия стилевика;
* из преамбулы убирается все, что вы сами туда не вносили;
* пишется `\documentclass{itmo-student-thesis}` с желаемыми опциями;
* данные о Вас, Вашей теме и научном руководителе (а также содержимое аннотации, если Вы хотите ее собирать этим стилевиком) 
  вносятся, как указано в примерах, после чего делается `\maketitle{Бакалавр}` или `\maketitle{Магистр}`;
* вместо `\printbibliography` пишется `\printmainbibliography`, как в примере;
* все остальное остается без изменений, и в этом состоянии все уже должно собираться;
* если все работает, можно удалить папку sty от старого стилевика, она больше не нужна.

## Возможные проблемы при миграции
* скорее всего "поедут" таблицы. В качестве быстрого исправления   помогает поставить `\small` перед `\begin{tabular}`, а если она все еще
  слишком широкая --- может помочь поставить `\setlength{\tabcolsep}{0.2em}` там же.
* если Вы использовали `\usepackage{algorithmic}`, то у Вас в псевдокоде используются `\STATE`, `\IF`, `\WHILE` и так далее. Чтобы это
  работало с `algorithmicx`, надо заменить все конструкции на `\State`, `\If`, `\While` и так далее. Можно сделать это через пачку `\newcommand`, и,
  возможно, я это когда-нибудь сделаю в самом стилевике.
* Конструкции вида
```
@misc{example,
    url="\url{http://www.example.com/}"
}
```
некорректно работают с `biblatex`+`biber`, потому что они корректно обрабатывают поле `url`, и надо писать:
```
@misc{example,
    url={http://www.example.com/}
}
```
* Скрипты, подобные `latexmk`, предназначенные для автоматизации сборки документов LaTeX, могут перестать работать. В частности, такое случилось
с утилитой [`latex-makefile`](https://github.com/shiblon/latex-makefile), которая не в курсе о существовании `biber`. Для этого случая
известно [исправление](https://code.google.com/p/latex-makefile/issues/detail?id=113).

## Известные баги
* При использовании опции `times` (то есть, пакета `pscyr`) и сборки текста через `latex` (но не `pdflatex`) из текста пропадают кавычки-елочки
  и еще некоторые символы. Это, вероятнее всего, баг пакета `pscyr`. Можно пофиксить это путем применения `sed` к файлу `*.dvi`, но гораздо приятнее
  все-таки использовать `pdflatex`. (Upstream)
* Некоторые вещи, например, число страниц, являются гиперссылками (под управлением пакета `hyperref`), хотя не должны. (Issue [#3](https://github.com/mbuzdalov/latex-styles/issues/3))
* В аннотации все еще не считаются источники по категориям, только их общее число (Issue [#10](https://github.com/mbuzdalov/latex-styles/issues/10)).
* По состоянию на 28 марта 2016 года замечен баг апстрима: biblatex-3.3 оказался несовместимым по компиляции с biblatex-gost из TeXLive 2015. Как следствие, biber-2.4 тоже почти наверняка использовать 
нельзя. (Issue [#9](https://github.com/mbuzdalov/latex-styles/issues/9), upstream)

## Часто задаваемые вопросы
* *Правда ли, что официальное название Университета ИТМО начинается с маленькой буквы? (федеральное...)* Да, правда. Текущие [реквизиты ИТМО](http://www.ifmo.ru/file/stat/26/obschiye_rekvizity.doc),
действующие с июня 2014 года, предписывают начинать с маленькой буквы, и предыдущая их ревизия делала то же самое.

## Описание изменений в версиях
Версия | Изменения
-------|----------
1.1.0.b12 | Специальность у бакалавров исправлена на 01.03.02.
1.1.0.b11 | Добавлена поддержка указания дат выдачи задания (\startdate{день}{месяц}{год}), срока сдачи работы (\finishdate{...}{...}{...}), даты защиты (\defencedate{...}{...}{...}). Если не указывать, будет генерироваться обычное место для заполнения даты.
1.1.0.b10 | "Пояснительная записка магистерской диссертации" превращена в "магистерскую диссертацию". Выключено предупреждение при отсутствии консультантов. Изменено направление подготовки (специальность) по умолчанию (добавлен номер 01.04.02). Добавлены направленности (профили) по умолчанию, соответствующие реальной ситуации на кафедре КТ, разные для магистров и бакалавров. В задании поле "Студенту" переименовано в "Студент". Немного изменена верстка формальных страниц.
1.1.0.b9 | По многочисленным просьбам трудящихся и не очень, магистерская диссертация снова называется магистерской диссертацией.
1.1.0.b8 | Тире в страничных интервалах в библиографии --- теперь endash (Issue [#11](https://github.com/mbuzdalov/latex-styles/issues/11)).
1.1.0.b7 | Нумерация страниц --- сверху по центру (Issue [#12](https://github.com/mbuzdalov/latex-styles/issues/12)).
1.1.0.b6 | Выключены переносы в оглавлении (Issue [#5](https://github.com/mbuzdalov/latex-styles/issues/5)).
1.1.0.b5 | Теперь генерируются и задания тоже (Issue [#7](https://github.com/mbuzdalov/latex-styles/issues/7)). В связи с полной сменой шаблонов сгорела необходимость в правильных подчеркиваниях (Issue [#1](https://github.com/mbuzdalov/latex-styles/issues/1)). Пока не считаются источники по категориям (Issue [#10](https://github.com/mbuzdalov/latex-styles/issues/10)).
1.1.0.b4 | Удалена опция `page4`, так как теперь содержательная часть всегда должна начинаться с четвертой страницы.
1.1.0.b3 | Исправлена фиксированная ширина слова ПРИЛОЖЕНИЕ в оглавлении (Issue [#2](https://github.com/mbuzdalov/latex-styles/issues/2)). Также в качестве набора шрифтов по умолчанию теперь используется Paratype.
1.1.0.b2 | Исправлена нумерация флоатов в приложениях (Issue [#6](https://github.com/mbuzdalov/latex-styles/issues/6)).
1.1.0.b1 | Исправлена нумерация списков и приложений (Issue [#8](https://github.com/mbuzdalov/latex-styles/issues/8)).
1.0.4  | Новая команда `\chapterconclusion` создает ненумерованный раздел "Выводы по главе XX", где XX --- номер текущей главы.
1.0.3  | Добавлена опция `page4` про нумерацию страниц.
1.0.2  | Нумерация листингов теперь не перезапускается в каждой главе (так как счетчик `lstlisting` определяется только после `\begin{document}`, ему не получалось убрать перезапуски в преамбуле).
1.0.1  | Исправлено название университета по умолчанию (больше нет слова "профессионального").
1.0.0  | Исходная версия (не была обозначена).

## Обратная связь
Все вопросы, пожелания, замечания, исправления пишите почтой (которую здесь не указываю) или средствами GitHub.
